# ğŸ—ï¸ ECU Tuning Service - Complete Architecture Diagram

Complete technical architecture showing all systems, data flow, and how everything connects.

---

## ğŸ“Š High-Level Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          INTERNET / USERS                                   â”‚
â”‚  (Clients + Admins accessing your website)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                        â”‚                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   CLIENT PORTAL â”‚      â”‚   ADMIN PANEL      â”‚   â”‚   EMAIL/WHATSAPP   â”‚
        â”‚  (Port 3000)    â”‚      â”‚   (Port 3001)      â”‚   â”‚   NOTIFICATIONS    â”‚
        â”‚                 â”‚      â”‚                    â”‚   â”‚                    â”‚
        â”‚ - File Upload   â”‚      â”‚ - Order Management â”‚   â”‚ - Gmail (Email)    â”‚
        â”‚ - Track Status  â”‚      â”‚ - View Details     â”‚   â”‚ - Twilio (SMS/WA)  â”‚
        â”‚ - Download File â”‚      â”‚ - Change Status    â”‚   â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                        â”‚                        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API SERVER     â”‚     â”‚  NOTIFICATION      â”‚
                    â”‚   (Port 4000)    â”‚     â”‚  SERVICE           â”‚
                    â”‚                  â”‚     â”‚                    â”‚
                    â”‚ - File Upload    â”‚     â”‚ - Send Emails      â”‚
                    â”‚ - Create Orders  â”‚â”€â”€â”€â”€â–¶â”‚ - Send WhatsApp    â”‚
                    â”‚ - Return Files   â”‚     â”‚                    â”‚
                    â”‚ - Auth Check     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    DATABASE        â”‚      â”‚   FILE STORAGE     â”‚
    â”‚                    â”‚      â”‚                    â”‚
    â”‚ - SQLite (Local)   â”‚      â”‚ - uploads/         â”‚
    â”‚   OR               â”‚      â”‚   (Original files) â”‚
    â”‚ - Firestore        â”‚      â”‚                    â”‚
    â”‚   (Firebase)       â”‚      â”‚ - uploads/modified/â”‚
    â”‚                    â”‚      â”‚   (Modified files) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–¥ï¸ Detailed System Components

### 1ï¸âƒ£ **CLIENT PORTAL** (Port 3000)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT PORTAL - http://localhost:3000                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  public/index.html - Upload Form                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Customer Name                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Customer Email                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ WhatsApp Number                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Vehicle Make/Model/Year                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Vehicle Engine Specs                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Service Selection (7 options)              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Custom Description                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ ECU File Upload (.bin, .hex, etc)         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ [SUBMIT BUTTON]                           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                               â”‚
â”‚                         â”‚ (JavaScript)                  â”‚
â”‚                         â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  public/app.js - Client-Side Logic              â”‚  â”‚
â”‚  â”‚  - Form validation                              â”‚  â”‚
â”‚  â”‚  - File size check (50MB max)                   â”‚  â”‚
â”‚  â”‚  - FormData preparation                         â”‚  â”‚
â”‚  â”‚  - API call to server.js                        â”‚  â”‚
â”‚  â”‚  - Show order ID after upload                   â”‚  â”‚
â”‚  â”‚  - Download section for completed orders        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  Served by: client-server.js (Express)                â”‚
â”‚  Files: public/index.html + app.js + styles.css       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2ï¸âƒ£ **ADMIN PANEL** (Port 3001)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN PANEL - http://localhost:3001                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LOGIN PAGE                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Password: [____________]  [LOGIN]         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                               â”‚
â”‚            (Session stored in memory)                  â”‚
â”‚                         â”‚                               â”‚
â”‚                         â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ADMIN DASHBOARD                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ ORDER #010 | Status: PENDING            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Customer: John | Email: john@email.com  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Vehicle: BMW 2020 M340i                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [ğŸ” View Full Details]                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Upload Modified File]                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Change Status]                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Download Original]                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Download Modified]                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Delete Order]                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ [VIEW FULL DETAILS MODAL]                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€ ORDER STATUS (Yellow) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ Order #010 | PENDING | 2025-12-06  â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”œâ”€ VEHICLE INFO (Blue) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ BMW M340i 2020 | 3.0L Twin-Turbo   â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”œâ”€ SERVICE INFO (Orange) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ DPF Delete | Custom: Remove codes  â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”œâ”€ CUSTOMER INFO (Green) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ John Doe | john@email.com | +212... â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”œâ”€ FILE INFO (Purple) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ Original: M340i_Stock.bin          â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ Modified: (not uploaded yet)       â”‚ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€ ACTION BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    [Change Status] [Upload] [Download]   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  Served by: admin-server.js (Express)                 â”‚
â”‚  Files: public/admin.html + admin.js + styles.css     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ **API SERVER** (Port 4000) - The Brain
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API SERVER - http://localhost:4000                     â”‚
â”‚  File: server.js (Express.js)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  REQUEST FLOW:                                          â”‚
â”‚                                                          â”‚
â”‚  Client/Admin sends HTTP request                        â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MULTER FILE HANDLER                          â”‚    â”‚
â”‚  â”‚  - Validate file type (.bin, .hex, etc)      â”‚    â”‚
â”‚  â”‚  - Check file size (max 50MB)                 â”‚    â”‚
â”‚  â”‚  - Save to: uploads/ folder                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  CREATE ORDER                                 â”‚    â”‚
â”‚  â”‚  - Extract form data                          â”‚    â”‚
â”‚  â”‚  - Validate email & phone                     â”‚    â”‚
â”‚  â”‚  - Generate Order ID                          â”‚    â”‚
â”‚  â”‚  - Store in database.js                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  SEND NOTIFICATIONS                           â”‚    â”‚
â”‚  â”‚  - Email to customer (Gmail)                  â”‚    â”‚
â”‚  â”‚  - WhatsApp (Twilio) - if configured         â”‚    â”‚
â”‚  â”‚  - Include order ID + tracking link           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  RETURN RESPONSE                              â”‚    â”‚
â”‚  â”‚  {                                             â”‚    â”‚
â”‚  â”‚    "status": "success",                       â”‚    â”‚
â”‚  â”‚    "orderId": "010",                          â”‚    â”‚
â”‚  â”‚    "message": "File uploaded successfully"    â”‚    â”‚
â”‚  â”‚  }                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  ENDPOINTS:                                             â”‚
â”‚  â”œâ”€ POST   /api/orders              (Create order)    â”‚
â”‚  â”œâ”€ GET    /api/orders              (Get all)         â”‚
â”‚  â”œâ”€ GET    /api/orders/:id          (Get single)      â”‚
â”‚  â”œâ”€ PUT    /api/orders/:id/status   (Update status)   â”‚
â”‚  â”œâ”€ POST   /api/orders/:id/modified (Upload modified) â”‚
â”‚  â”œâ”€ DELETE /api/orders/:id          (Delete order)    â”‚
â”‚  â”œâ”€ GET    /api/orders/:id/download/original          â”‚
â”‚  â”œâ”€ GET    /api/orders/:id/download/modified          â”‚
â”‚  â””â”€ GET    /                        (Health check)    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4ï¸âƒ£ **DATABASE LAYER** - Data Storage

#### Option A: SQLite (Default - Local)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE: SQLite (Local File)                          â”‚
â”‚  File: database.sqlite                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  database.js (SQLite Interface)                â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ ORDERS TABLE                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ id              (Order ID)          â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ customer_name   (John Doe)         â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ customer_email  (john@example.com) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ customer_phone  (+212 xxx xxx xxx) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ vehicle_make    (BMW)              â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ vehicle_model   (M340i)            â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ vehicle_year    (2020)             â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ vehicle_engine  (3.0L Twin-Turbo) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ service_type    (DPF Delete)       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ custom_desc     (Remove DTC codes) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ original_file   (filename.bin)     â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ modified_file   (NULL)             â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ status          (PENDING)          â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ created_at      (2025-12-06 10:30) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ updated_at      (2025-12-06 10:30) â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  Functions:                                     â”‚  â”‚
â”‚  â”‚  - createOrder(orderData)                       â”‚  â”‚
â”‚  â”‚  - getAllOrders()                               â”‚  â”‚
â”‚  â”‚  - getOrder(id)                                 â”‚  â”‚
â”‚  â”‚  - updateOrderStatus(id, status)                â”‚  â”‚
â”‚  â”‚  - updateOrderModifiedFile(id, filename)        â”‚  â”‚
â”‚  â”‚  - deleteOrder(id)                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  Storage Location:                                      â”‚
â”‚  C:\Users\remad\myapp\database.sqlite                  â”‚
â”‚                                                          â”‚
â”‚  File Size: Depends on orders (typically < 10MB)       â”‚
â”‚  Backup: scripts\backup-before-migrate.ps1             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Option B: Firebase Firestore (Cloud - Optional)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE: Firebase Firestore (Cloud)                  â”‚
â”‚  Requires: USE_FIREBASE=1 environment variable         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  db/firestore-adapter.js                        â”‚  â”‚
â”‚  â”‚  (Maps to Firebase Firestore)                   â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ FIRESTORE COLLECTION: orders             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Document: {order-id-010}                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ {                                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "customerName": "John Doe",            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "customerEmail": "john@example.com",   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "vehicleMake": "BMW",                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "vehicleModel": "M340i",               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "serviceType": "DPF Delete",           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "status": "PENDING",                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "originalFile": "M340i_Stock.bin",     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "modifiedFile": null,                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "createdAt": "2025-12-06T10:30:00Z",   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   "updatedAt": "2025-12-06T10:30:00Z"    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ }                                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  FREE LIMITS:                                           â”‚
â”‚  - 1 GB storage                                        â”‚
â”‚  - 50,000 reads/day                                    â”‚
â”‚  - 20,000 writes/day                                   â”‚
â”‚  - 20,000 deletes/day                                  â”‚
â”‚                                                          â”‚
â”‚  Location: Cloud (Firebase Console)                    â”‚
â”‚  Console: https://console.firebase.google.com/         â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5ï¸âƒ£ **FILE STORAGE SYSTEM**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILE STORAGE - Local Filesystem                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Location: C:\Users\remad\myapp\uploads\                â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ORIGINAL FILES                                    â”‚ â”‚
â”‚  â”‚  (As uploaded by customers)                        â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  uploads/                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ 010_M340i_Stock.bin                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ 011_A6_Original.hex                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ 012_Golf_Engine.ori                           â”‚ â”‚
â”‚  â”‚  â””â”€ ...                                            â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  File naming: {order-id}_{customer-name}_{file}  â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  Access: GET /api/orders/:id/download/original   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MODIFIED FILES                                    â”‚ â”‚
â”‚  â”‚  (After admin processing & upload)                â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  uploads/modified/                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ 010_M340i_Modified.bin                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ 011_A6_Modified.hex                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ 012_Golf_Modified.ori                         â”‚ â”‚
â”‚  â”‚  â””â”€ ...                                            â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  File naming: {order-id}_{customer-name}_{file}  â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚  Access: GET /api/orders/:id/download/modified   â”‚ â”‚
â”‚  â”‚  Upload: POST /api/orders/:id/modified           â”‚ â”‚
â”‚  â”‚  (Admin uses this when ready to send to customer) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  File Size Limits:                                       â”‚
â”‚  - Max upload: 50 MB                                    â”‚
â”‚  - Total storage: Limited by server disk space          â”‚
â”‚                                                           â”‚
â”‚  Example Directory Tree:                                â”‚
â”‚  uploads/                                               â”‚
â”‚  â”œâ”€â”€ 010_John_M340i.bin                  (45 MB)       â”‚
â”‚  â”œâ”€â”€ 011_Ahmed_A6.hex                    (32 MB)       â”‚
â”‚  â”œâ”€â”€ modified/                                          â”‚
â”‚  â”‚   â”œâ”€â”€ 010_John_M340i_TUNED.bin       (46 MB)       â”‚
â”‚  â”‚   â”œâ”€â”€ 011_Ahmed_A6_TUNED.hex         (33 MB)       â”‚
â”‚  â”‚   â””â”€â”€ 012_Sara_Golf_TUNED.ori        (28 MB)       â”‚
â”‚  â””â”€â”€ ...                                               â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6ï¸âƒ£ **NOTIFICATION SYSTEM**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NOTIFICATIONS - Real-Time Customer Updates             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  EMAIL NOTIFICATIONS (Nodemailer + Gmail)      â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Configuration:                                â”‚   â”‚
â”‚  â”‚  - SERVICE: gmail                              â”‚   â”‚
â”‚  â”‚  - USER: your-email@gmail.com                  â”‚   â”‚
â”‚  â”‚  - PASSWORD: app-specific password (16 chars) â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Triggers:                                     â”‚   â”‚
â”‚  â”‚  1. Order created                              â”‚   â”‚
â”‚  â”‚     Subject: "Your ECU File Uploaded"         â”‚   â”‚
â”‚  â”‚     Content: Order ID, status, tracking link  â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  2. Status changed to PROCESSING               â”‚   â”‚
â”‚  â”‚     Subject: "Your Order Is Being Processed"  â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  3. Status changed to COMPLETED                â”‚   â”‚
â”‚  â”‚     Subject: "Your Modified File Is Ready!"   â”‚   â”‚
â”‚  â”‚     Content: Download link                     â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Cost: FREE (within Gmail limits: 500/day)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  WhatsApp NOTIFICATIONS (Twilio - Optional)    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Configuration:                                â”‚   â”‚
â”‚  â”‚  - TWILIO_ACCOUNT_SID: your-sid               â”‚   â”‚
â”‚  â”‚  - TWILIO_AUTH_TOKEN: your-token              â”‚   â”‚
â”‚  â”‚  - TWILIO_WHATSAPP_FROM: +1415xxx...          â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Triggers: Same as email                       â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Cost: ~$0.01 per message (PAID)              â”‚   â”‚
â”‚  â”‚         Example: 100 orders = $1-2/month      â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Status: OPTIONAL (skip to save costs)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  Flow:                                                  â”‚
â”‚  API receives order                                    â”‚
â”‚     â”‚                                                   â”‚
â”‚     â”œâ”€â–¶ Save to database                              â”‚
â”‚     â”‚                                                   â”‚
â”‚     â”œâ”€â–¶ Send Email (Gmail) âœ…                          â”‚
â”‚     â”‚   "Thank you for uploading your file"           â”‚
â”‚     â”‚   Include: Order ID, tracking link              â”‚
â”‚     â”‚                                                   â”‚
â”‚     â””â”€â–¶ Send WhatsApp (Twilio) - Optional            â”‚
â”‚        "Your order #010 received, tracking ID..."    â”‚
â”‚                                                          â”‚
â”‚  Returns to client:                                    â”‚
â”‚  { status: "success", orderId: "010" }                â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Complete Data Flow - From Upload to Download

### Step 1: Customer Uploads File
```
CUSTOMER BROWSER (Port 3000)
        â”‚
        â””â”€â–¶ Fills form (name, email, phone, vehicle info, service)
             â”‚
             â””â”€â–¶ Selects ECU file (max 50MB)
                  â”‚
                  â””â”€â–¶ Submits form
                       â”‚
                       â”œâ”€â–¶ JavaScript validates (app.js)
                       â”‚
                       â””â”€â–¶ FormData with file
```

### Step 2: API Processes Upload
```
API SERVER (Port 4000)
        â”‚
        â”œâ”€â–¶ Multer validates file
        â”‚   - Extension check (.bin, .hex, etc)
        â”‚   - Size check (max 50MB)
        â”‚   - Saves to: uploads/{order-id}_filename.ext
        â”‚
        â”œâ”€â–¶ database.js creates order record
        â”‚   {
        â”‚     id: "010",
        â”‚     customerName: "John",
        â”‚     originalFile: "010_M340i_Stock.bin",
        â”‚     status: "PENDING",
        â”‚     ...
        â”‚   }
        â”‚
        â””â”€â–¶ Sends notifications
            â”œâ”€â–¶ Email (Gmail) â†’ customer@email.com
            â””â”€â–¶ WhatsApp (Twilio) â†’ +212 xxx xxx
```

### Step 3: Admin Reviews Order
```
ADMIN PANEL (Port 3001)
        â”‚
        â”œâ”€â–¶ Admin logs in with password
        â”‚
        â”œâ”€â–¶ Sees all orders (API: GET /api/orders)
        â”‚
        â”œâ”€â–¶ Clicks "View Full Details" on order #010
        â”‚   - See customer info (blue section)
        â”‚   - See vehicle info (blue section)
        â”‚   - See service requested (orange section)
        â”‚
        â””â”€â–¶ Downloads original file
            â””â”€â–¶ API: GET /api/orders/010/download/original
                â””â”€â–¶ Files: C:/myapp/uploads/010_M340i_Stock.bin
```

### Step 4: Admin Modifies File
```
ADMIN COMPUTER (External Tool)
        â”‚
        â””â”€â–¶ Opens downloaded file in WinOLS/MapTuner
            â”‚
            â””â”€â–¶ Makes modifications (DPF delete, etc)
                 â”‚
                 â””â”€â–¶ Exports modified file
                     â””â”€â–¶ Saves as: 010_M340i_Modified.bin
```

### Step 5: Admin Uploads Modified File
```
ADMIN PANEL (Port 3001)
        â”‚
        â”œâ”€â–¶ Clicks "Upload Modified File"
        â”‚
        â”œâ”€â–¶ Selects modified file from their computer
        â”‚
        â””â”€â–¶ POST /api/orders/010/modified
            â”‚
            â”œâ”€â–¶ Multer saves to: uploads/modified/010_M340i_Modified.bin
            â”‚
            â”œâ”€â–¶ database.js updates order
            â”‚   {
            â”‚     id: "010",
            â”‚     modifiedFile: "010_M340i_Modified.bin",
            â”‚     status: "COMPLETED",
            â”‚     ...
            â”‚   }
            â”‚
            â””â”€â–¶ Sends notification
                â””â”€â–¶ Email/WhatsApp: "Your file is ready! Download it."
```

### Step 6: Customer Downloads Modified File
```
CUSTOMER BROWSER (Port 3000)
        â”‚
        â”œâ”€â–¶ Returns to tracking page
        â”‚
        â”œâ”€â–¶ Enters Order ID: "010"
        â”‚
        â”œâ”€â–¶ Sees "Download Modified File" button
        â”‚
        â””â”€â–¶ Clicks download
            â”‚
            â””â”€â–¶ GET /api/orders/010/download/modified
                â”‚
                â””â”€â–¶ API serves: uploads/modified/010_M340i_Modified.bin
                     â”‚
                     â””â”€â–¶ Browser downloads file
```

---

## ğŸ“¡ Port Configuration Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PORT ASSIGNMENTS - All Running on Localhost            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  PORT 3000 â”€â”€â”€â”€â–¶ CLIENT PORTAL                        â”‚
â”‚                 http://localhost:3000                  â”‚
â”‚                 â”œâ”€ Upload form (public/index.html)    â”‚
â”‚                 â”œâ”€ JavaScript logic (public/app.js)   â”‚
â”‚                 â””â”€ Styling (public/styles.css)        â”‚
â”‚                                                         â”‚
â”‚  PORT 3001 â”€â”€â”€â”€â–¶ ADMIN PANEL                          â”‚
â”‚                 http://localhost:3001                  â”‚
â”‚                 â”œâ”€ Login page (public/admin.html)     â”‚
â”‚                 â”œâ”€ Order management (public/admin.js) â”‚
â”‚                 â””â”€ Styling (public/styles.css)        â”‚
â”‚                                                         â”‚
â”‚  PORT 4000 â”€â”€â”€â”€â–¶ API SERVER (server.js)              â”‚
â”‚                 http://localhost:4000                  â”‚
â”‚                 â”œâ”€ File upload endpoint               â”‚
â”‚                 â”œâ”€ Order CRUD operations              â”‚
â”‚                 â”œâ”€ File download endpoint             â”‚
â”‚                 â””â”€ Notification sender                â”‚
â”‚                                                         â”‚
â”‚  PORT 4005 â”€â”€â”€â”€â–¶ Firebase Emulator UI (Optional)      â”‚
â”‚                 http://localhost:4005                  â”‚
â”‚                 â”œâ”€ Firestore data viewer              â”‚
â”‚                 â”œâ”€ Storage browser                    â”‚
â”‚                 â””â”€ Authentication tester              â”‚
â”‚                                                         â”‚
â”‚  PORT 8080 â”€â”€â”€â”€â–¶ Firestore Emulator (Optional)       â”‚
â”‚  PORT 9099 â”€â”€â”€â”€â–¶ Auth Emulator (Optional)            â”‚
â”‚  PORT 9199 â”€â”€â”€â”€â–¶ Storage Emulator (Optional)         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication & Session Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN AUTHENTICATION FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. Admin visits http://localhost:3001                  â”‚
â”‚     â”‚                                                    â”‚
â”‚     â””â”€â–¶ Login form appears                              â”‚
â”‚                                                          â”‚
â”‚  2. Admin enters password: admin123                      â”‚
â”‚     â”‚                                                    â”‚
â”‚     â””â”€â–¶ POST /admin/login                               â”‚
â”‚          â”‚                                               â”‚
â”‚          â”œâ”€â–¶ Verify password vs ENV variable           â”‚
â”‚          â”‚   (default: admin123)                        â”‚
â”‚          â”‚                                               â”‚
â”‚          â”œâ”€â–¶ Generate session ID                        â”‚
â”‚          â”‚   (random string stored in memory)           â”‚
â”‚          â”‚                                               â”‚
â”‚          â””â”€â–¶ Return sessionId in response               â”‚
â”‚              { sessionId: "abc123xyz456" }              â”‚
â”‚                                                          â”‚
â”‚  3. Browser stores sessionId                            â”‚
â”‚     â”‚                                                    â”‚
â”‚     â””â”€â–¶ In-memory session object (server-side)         â”‚
â”‚          {                                              â”‚
â”‚            "abc123xyz456": {                            â”‚
â”‚              loggedIn: true,                            â”‚
â”‚              timestamp: 2025-12-06T10:30:00Z           â”‚
â”‚            }                                            â”‚
â”‚          }                                              â”‚
â”‚                                                          â”‚
â”‚  4. Admin makes subsequent requests                     â”‚
â”‚     â”‚                                                    â”‚
â”‚     â””â”€â–¶ Include sessionId in:                           â”‚
â”‚          - Header: x-admin-session                      â”‚
â”‚          - Query param: ?session=abc123xyz456           â”‚
â”‚                                                          â”‚
â”‚  5. Server validates sessionId                          â”‚
â”‚     â”‚                                                    â”‚
â”‚     â”œâ”€â–¶ If valid: Allow access to admin endpoints      â”‚
â”‚     â”‚                                                    â”‚
â”‚     â””â”€â–¶ If invalid: Return 401 Unauthorized            â”‚
â”‚                                                          â”‚
â”‚  NOTE: Sessions stored in memory (lost on server restart)
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» How Everything Runs Together - Local Development

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOCAL DEVELOPMENT STARTUP                              â”‚
â”‚  (Running all servers on your computer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Command: .\scripts\start-clean.ps1                     â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Terminal Window 1: Firebase Emulators             â”‚ â”‚
â”‚  â”‚ Command: npm run emulators                        â”‚ â”‚
â”‚  â”‚ Status: âœ… Running                                â”‚ â”‚
â”‚  â”‚ Firestore UI: http://localhost:4005               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Port 8080 â†’ Firestore Database               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Port 9099 â†’ Auth Service                     â”‚ â”‚
â”‚  â”‚ â””â”€ Port 9199 â†’ Storage Service                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Terminal Window 2: API Server                     â”‚ â”‚
â”‚  â”‚ Command: npm run start:api                        â”‚ â”‚
â”‚  â”‚ Status: âœ… Running                                â”‚ â”‚
â”‚  â”‚ Server: http://localhost:4000                     â”‚ â”‚
â”‚  â”‚ Processes:                                        â”‚ â”‚
â”‚  â”‚ â”œâ”€ Listen on port 4000                          â”‚ â”‚
â”‚  â”‚ â”œâ”€ Connect to database.sqlite                    â”‚ â”‚
â”‚  â”‚ â”œâ”€ Initialize Multer (file upload)               â”‚ â”‚
â”‚  â”‚ â”œâ”€ Setup Nodemailer (email)                      â”‚ â”‚
â”‚  â”‚ â””â”€ Setup CORS (cross-origin requests)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Terminal Window 3: Client Server                  â”‚ â”‚
â”‚  â”‚ Command: npm run start:client                     â”‚ â”‚
â”‚  â”‚ Status: âœ… Running                                â”‚ â”‚
â”‚  â”‚ Server: http://localhost:3000                     â”‚ â”‚
â”‚  â”‚ Serves: public/index.html + app.js               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Terminal Window 4: Admin Server                   â”‚ â”‚
â”‚  â”‚ Command: npm run start:admin                      â”‚ â”‚
â”‚  â”‚ Status: âœ… Running                                â”‚ â”‚
â”‚  â”‚ Server: http://localhost:3001                     â”‚ â”‚
â”‚  â”‚ Serves: public/admin.html + admin.js              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  All running simultaneously!                             â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Production Deployment (Railway)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLOUD DEPLOYMENT ON RAILWAY                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ INTERNET USERS                                     â”‚ â”‚
â”‚  â”‚ https://ecu-tuning-production.up.railway.app      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â”‚                                 â”‚
â”‚                        â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ RAILWAY INFRASTRUCTURE (Cloud)                    â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Docker Container with Node.js               â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ npm install (dependencies)                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ npm run start:api (Port 4000 internal)   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ npm run start:client (Port 3000 internal)â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€ npm run start:admin (Port 3001 internal) â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Environment Variables (Encrypted)            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ ADMIN_PASSWORD = secure-password         â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ USE_FIREBASE = 0 (SQLite)               â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ EMAIL_SERVICE = gmail                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ EMAIL_USER = your-email@gmail.com       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€ EMAIL_PASSWORD = app-password           â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ File Storage (Persistent Volume)             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ database.sqlite (persists)                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ uploads/ (persists)                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€ uploads/modified/ (persists)              â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                    â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ Networking                                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ Outbound: Gmail (SMTP)                    â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â”œâ”€ Outbound: Twilio (WhatsApp) - optional   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€ Inbound: HTTPS (SSL/TLS automatic)        â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  GitHub â—€â”€â–¶ Railway (Auto-deploy on push)              â”‚
â”‚  Every push to master branch = automatic deployment      â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Technology Stack Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TECHNOLOGY STACK                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  FRONTEND (Client-Side)                                 â”‚
â”‚  â”œâ”€ HTML5 (public/index.html)                          â”‚
â”‚  â”œâ”€ CSS3 (public/styles.css)                           â”‚
â”‚  â”œâ”€ Vanilla JavaScript (public/app.js)                 â”‚
â”‚  â””â”€ FormData API (file uploads)                        â”‚
â”‚                                                           â”‚
â”‚  BACKEND (Server-Side)                                 â”‚
â”‚  â”œâ”€ Node.js (v25+)                                    â”‚
â”‚  â”œâ”€ Express.js (web framework)                        â”‚
â”‚  â”œâ”€ Multer (file uploads)                             â”‚
â”‚  â””â”€ CORS (cross-origin requests)                      â”‚
â”‚                                                           â”‚
â”‚  DATABASE OPTIONS                                       â”‚
â”‚  â”œâ”€ SQLite3 (default - local file)                    â”‚
â”‚  â”œâ”€ Firebase Firestore (optional - cloud)             â”‚
â”‚  â””â”€ db/index.js (abstraction layer)                   â”‚
â”‚                                                           â”‚
â”‚  FILE STORAGE                                           â”‚
â”‚  â”œâ”€ Local filesystem (uploads/)                       â”‚
â”‚  â”œâ”€ Firebase Storage (optional)                       â”‚
â”‚  â””â”€ Multer (file validation)                          â”‚
â”‚                                                           â”‚
â”‚  NOTIFICATIONS                                          â”‚
â”‚  â”œâ”€ Nodemailer (email via Gmail)                      â”‚
â”‚  â”œâ”€ Twilio (WhatsApp - optional)                      â”‚
â”‚  â””â”€ Express (HTTP endpoints)                          â”‚
â”‚                                                           â”‚
â”‚  AUTHENTICATION                                         â”‚
â”‚  â”œâ”€ Session-based (in-memory)                         â”‚
â”‚  â””â”€ Simple password check                             â”‚
â”‚                                                           â”‚
â”‚  DEPLOYMENT                                             â”‚
â”‚  â”œâ”€ Railway (recommended)                             â”‚
â”‚  â”œâ”€ Docker (containerization)                         â”‚
â”‚  â”œâ”€ Git/GitHub (version control)                      â”‚
â”‚  â””â”€ npm (package management)                          â”‚
â”‚                                                           â”‚
â”‚  DEVELOPMENT TOOLS                                     â”‚
â”‚  â”œâ”€ PowerShell scripts (Windows automation)            â”‚
â”‚  â”œâ”€ Firebase Emulators (local testing)                â”‚
â”‚  â”œâ”€ npm scripts (start/test/deploy)                   â”‚
â”‚  â””â”€ GitHub (repository)                              â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request/Response Lifecycle Example

### Example: Customer Uploads ECU File

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BROWSER (Customer at http://localhost:3000)             â”‚
â”‚                                                          â”‚
â”‚ Form Submitted:                                         â”‚
â”‚ {                                                       â”‚
â”‚   "customerName": "John Doe",                          â”‚
â”‚   "customerEmail": "john@example.com",                 â”‚
â”‚   "customerPhone": "+212 5XX XXX XXX",                 â”‚
â”‚   "vehicleMake": "BMW",                                â”‚
â”‚   "vehicleModel": "M340i",                             â”‚
â”‚   "vehicleYear": "2020",                               â”‚
â”‚   "vehicleEngine": "3.0L Twin-Turbo",                 â”‚
â”‚   "serviceType": "DPF Delete",                         â”‚
â”‚   "customDescription": "Remove DTC codes",             â”‚
â”‚   "file": <binary file data>                          â”‚
â”‚ }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ POST /api/orders
                     â”‚ (multipart/form-data)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API SERVER (Port 4000)                                  â”‚
â”‚                                                          â”‚
â”‚ 1. Multer middleware:                                  â”‚
â”‚    â”œâ”€ Check: File extension in [.bin, .hex, ...]? âœ“  â”‚
â”‚    â”œâ”€ Check: File size < 50MB? âœ“                      â”‚
â”‚    â””â”€ Save: uploads/010_John_M340i.bin (45 MB)       â”‚
â”‚                                                          â”‚
â”‚ 2. Create database record:                            â”‚
â”‚    database.js â†’ createOrder({                        â”‚
â”‚      id: "010",                                        â”‚
â”‚      customerName: "John Doe",                        â”‚
â”‚      customerEmail: "john@example.com",               â”‚
â”‚      ...                                               â”‚
â”‚      originalFile: "010_John_M340i.bin",             â”‚
â”‚      status: "PENDING"                                â”‚
â”‚    })                                                  â”‚
â”‚                                                          â”‚
â”‚ 3. Send notifications:                                â”‚
â”‚    â”œâ”€ Nodemailer â†’ Gmail                             â”‚
â”‚    â”‚  To: john@example.com                           â”‚
â”‚    â”‚  Subject: "Your ECU File Uploaded"              â”‚
â”‚    â”‚  Body: "Order #010, tracking link..."           â”‚
â”‚    â”‚                                                   â”‚
â”‚    â””â”€ Twilio â†’ WhatsApp (if configured)              â”‚
â”‚       To: +212 5XX XXX XXX                           â”‚
â”‚       Message: "Order #010 received!"                â”‚
â”‚                                                          â”‚
â”‚ 4. Return response:                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ 200 OK
                     â”‚ {
                     â”‚   "status": "success",
                     â”‚   "orderId": "010",
                     â”‚   "message": "File uploaded successfully"
                     â”‚ }
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BROWSER (Customer)                                      â”‚
â”‚                                                          â”‚
â”‚ JavaScript (app.js):                                   â”‚
â”‚ - Parse response                                       â”‚
â”‚ - Extract orderId: "010"                              â”‚
â”‚ - Display: "Success! Your Order ID is: 010"          â”‚
â”‚ - Offer: "Download confirmation email"               â”‚
â”‚ - Suggest: "Check your email & WhatsApp"             â”‚
â”‚                                                          â”‚
â”‚ DATABASE (SQLite):                                    â”‚
â”‚ - Order record saved                                 â”‚
â”‚ - Can retrieve with GET /api/orders/010             â”‚
â”‚                                                          â”‚
â”‚ FILE STORAGE:                                         â”‚
â”‚ - Original file: uploads/010_John_M340i.bin         â”‚
â”‚ - Ready for admin to download & process             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Takeaways

| Component | Purpose | Technology | Location |
|-----------|---------|-----------|----------|
| **Client Portal** | Customer uploads files | HTML/CSS/JS | Port 3000 |
| **Admin Panel** | Manage orders & files | HTML/CSS/JS | Port 3001 |
| **API Server** | Process requests | Node.js/Express | Port 4000 |
| **Database** | Store orders | SQLite or Firestore | database.sqlite |
| **File Storage** | Store ECU files | Local filesystem | uploads/ |
| **Notifications** | Notify customers | Gmail + Twilio | Email/WhatsApp |
| **Authentication** | Admin login | Session-based | In-memory |
| **Deployment** | Production hosting | Railway + Docker | Cloud |

---

## ğŸš€ Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXPECTED PERFORMANCE (Local Development)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚ File Upload (50MB):        3-10 seconds                 â”‚
â”‚ Create Order:              50-100ms                     â”‚
â”‚ Send Email:                1-3 seconds (async)          â”‚
â”‚ Send WhatsApp:             2-5 seconds (async)          â”‚
â”‚ Get All Orders:            10-50ms (depends on count)   â”‚
â”‚ Download File (50MB):      5-15 seconds                 â”‚
â”‚ Admin Login:               100-200ms                    â”‚
â”‚                                                           â”‚
â”‚ EXPECTED PERFORMANCE (Production - Railway)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚ File Upload (50MB):        5-15 seconds                 â”‚
â”‚ Create Order:              100-200ms                    â”‚
â”‚ Send Email:                2-5 seconds (async)          â”‚
â”‚ API Response Time:         100-300ms                    â”‚
â”‚ Database Query:            10-50ms                      â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Version**: 2.0.0  
**Last Updated**: December 6, 2025  
**Designed for**: ECU Tuning Pro Service
